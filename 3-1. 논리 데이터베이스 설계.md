# 3.데이터베이스 구축
## 1. 논리 데이터베이스 설계
### 1-1. 관계 데이터 모델

**관계 데이터 모델**
- 현실 세계의 정보들을 컴퓨터에 표현하기 위하여 단순화, 추상화하여 체계적으로 표현한 개념적 모델
- 데이터(외적) + 데이터와의 관계(릴레이션) + 데이터의 의미 및 일관성 + 제약조건 등을 기술하기 위한 개념적 도구들의 모델
![관계 데이터 모델 구성도](https://github.com/7ahyeon/EIP-study/assets/107123698/e62b43d5-d211-4ec8-9738-f225826bed6c)

- 에드거 프랭크 코드(E. F. Codd) 제안

**관계 데이터 모델 구성 요소**
|구성 요소|설명|
|--|--|
|개체 Entity|업무 활동상 지속적인 관심을 가지고 있는 대상 <br>그 대상들 간에 동질성을 지닌 개체 집합이나 행위의 집합|
|속성 Attribute|업무에 필요한 개체에서 관리하고자 하는 더이상 분리되지 않는 최소한의 데이터 단위|
|관계 Relationship|개체 간의 관계 또는 속성 간의 논리적인 연결|

**관계 데이터 모델 절차**
- 요구사항 분석

|절차|설명|
|--|--|
|개념적 모델|현실 세계에 대한 이해를 위해 현실 세계에 대한 인식을 추상적 개념으로 표현하는 과정|
|논리적 모델|개념적 모델링 과정에서 얻은 개념적 구조를 컴퓨터가 이해하고 처리할 수 있는 환경으로 변환하는 과정|
|물리적 모델|각 DBMS의 특성을 고려하여 데이터베이스의 물리 데이터 모델(저장 구조)로 변환<br>- 테이블, 인덱스, 뷰, 파티션 등의 객체 생성|

**데이터베이스 설계**
|절차|주요 프로세스|
|--|--|
|요구 조건 분석|요구 조건 명세 작성|
|개념적 설계 단계|목표 DBMS에 맞는 스키마(독립적인 개념 스키마) 설계, 트랜잭션 모델링, E-R 모델링 수행|
|논리적 설계 단계|논리 데이터 모델로 변환, 트랜잭션 인터페이스 설계, 목표 DBMS에 맞는 스키마 평가 및 정제|
|물리적 설계|저장 레코드 양식 설계, 레코드 집중 Record Clustering의 분석 및 설계, 파일 조작/저장 방법 및 접근 경로 설계|
|구현|목표 DBMS의 DDL 수행, 데이터베이스 생성, 트랜잭션 작성|

- 레코드 집중 Record Clustering : 저장 공간에 데이터들이 물리적으로 집중 저장되도록 할당해 물리적 순차성을 이용하는 기술 (효율적인 검색 가능)

# 문제
- 데이터 모델에 표시해야 할 요소
  1. 데이터 구조
  2. 연산
  3. 제약조건

- 물리적 설계
  - 응답 시간, 저장 공간의 효율화, 트랜잭션 처리도
  - 저장 레코드 양식 설계, 레코드 집중의 분석 및 설계, 접근 경로의 설계
- 논리적 설계
  - 논리적 데이터베이스 구조로 매핑(mapping)
  - 트랜잭션 인터페이스 설계
  - 스키마 평가 및 정제
- 개념적 설계
  - 목표 DBMS에 맞는 스키마 설계
  - 트랜잭션 모델링

- 중복 관계 Redundant Relationship
  - 특정의 두 개체들 간에 두 번 이상의 종속 관계가 발생하는 관계
 
- 데이터 모델링 수행 시 도출되어 표현되는 관계
  - 1:1
  - 1:0 또는 1:1 관계
  - 1:1 또는 1:다 관계

- 해소해야하는 관계 - 구현 불가능
  - 다:다 (불특정 관계)
    
### 1-2. 관계 대수

**일반 집합 연산자 : 합집합 교집합 차집합 카티션 곱**
- 합집합 Union
- 교집합 Intersection
- 차집합 Difference
- 카티션 곱 Cartesian Product : 릴레이션 R의 모든 튜플을 다른 릴레이션 S의 모든 튜플과 결합

**순수 관계 연산자 : 셀렉트 프로젝트 조인 디비전**
- 셀렉트 Select : δ조건(R) : 릴레이션R에서 조건을 만족하는 튜플 반환(조건을 만족하는 릴레이션의 수평적 부분 집합으로 구성)
- 프로젝트 Project : π속성리스트(R) : 릴레이션R에서 주어진 속성들의 값으로만 구성된 튜플 반환
- 조인 Join : R▷◁S : 공통 속성을 이용해 릴레이션 R과 S의 튜플을 연결해 만들어진 튜플 반환
- 디비전 Division : R÷S : 릴레이션 S의 모든 튜플과 연관되어 있는 R의 튜플 반환
- 
# 문제
- 관계 대수
  - 관계형 데이터베이스에서 원하는 정보와 그 정보를 어떻게 유도하는 것인가를 기술하는 절차적인 언어
  - 릴레이션 조작을 위한 연산의 집합
  - 피연산자와 결과가 모두 릴레이션
  - 일반 집합 연산/순수 관계 연산 구분
  - 질의에 대한 해를 구하기 위해 수행해야 할 연산의 순서를 명시함

- 관계 해석 : 수학의 Predicate Calculus(수학에서 사용하는 어떤 지식이나 사실을 표현하는 방법; 술어 논리)에 기반을 두고 있음

### 1-3. 관계 해석

**관계 해석**
- '원하는 정보가 무엇'이라는 것만 선언하는 비절차적 특성을 가지고 있음
- 튜플 관계 해석 + 도메인 관계 해석
- 수학의 프레디킷 해석(Predicate calculus, 서술어 해석)에 기반을 가진 관계 데이터의 연산 표현 방법
- 관계 해석과 관계 대수 : 관계 데이터베이스를 처리하는 기능과 능력은 동등함 / 둘 모두 관계 해석과 관계 대수로 표현 가능함
- 프레디킷 Predicate : 실행 결과가 반드시 참이거나 거짓이 되는 함수

**튜플 (관계) 해석**
- 원하는 릴레이션을 튜플 해석식으로 정의하는 표기법
- 기본 연산 단위 : 튜플

**튜플 관계 해석 구성 요소**
- 튜플 변수 R(t) : 범위 변수, 선택된 릴레이션R의 튜플을 하나씩 그 값으로 취할 수 있는 변수
- 한정 애트리뷰트 Qualified Attribute : t.A 또는 t[A] : 릴레이션 R의 튜플 변수 t의 속성A값
- 원자식 Atomic Formula : 세 가지 형태의 원자(Atomic), 원자식을 실행한 결과 - 항상 참true or 거짓false

|유형|설명|
|--|--|
|범위식 S(t)|S : 범위 릴레이션 / t : 튜플 변수|
|비교조건식 tRθuS|t,u : 튜플 변수 / θ : 비교연산자 / R,S : 각각 t,u의 한정 애트리뷰트|
|한정조건식 tRθcS|튜플 변수 t에 대한 한정 애트리뷰트 / c : 상수|

**도메인 (관계) 해석**
- 사용자가 원하는 도메인 해석식으로 표현하는 방법
- 튜플 관계 해석과 기본 골격은 같으나 튜플 변수 대신 도메인 변수를 사용함

**도메인 관계 해석 구성 요소**
- 도메인 변수 S(x1, x2, ..., xn) : 특정 애트리뷰트의 도메인 내 한 원소만을 값으로 취하는 변수 / 각 도메인의 변수는 해당 도메인을 선언해야 함(S : 차수 n인 릴레이션, x1~xn : 해당 릴레이션의 n번째 애트리뷰트 도메인 변수)
 원자식 Atomic Formula : 세 가지 형태의 원자(Atomic), 원자식을 실행한 결과 - 항상 참true or 거짓false

|유형|설명|
|--|--|
|범위식 S(x1, x2, ..., xn)|S : 범위 릴레이션 / x1 : 도메인 변수|
|비교조건식 r0s|r,s : 도메인 변수 / θ : 비교연산자|
|한정조건식 rθc|r : 도메인 변수 / θ : 비교연산자 / c : r이 정의된 도메인값의 상수|

**논리적 기호**
- 논리 연산자 Boolean Operator / 정량자 Quantifier
- 논리 연산자

|구성요소|기호|설명|
|--|--|--|
|OR 연산|V|원자식 '또는' 관계|
|AND 연산|^|그리고|
|NOT 연산|ㄱ|원자식에 대한 부정|

**정량자**

|구성요소|기호|설명|
|--|--|--|
|전칭 정량자|∀|모든 형태의 가능한 튜플 for all|
|존재 정량자|∃|어떤 튜플 하나라도 존재 there exists|

**정형식 WFF ; Well-Formed Formula**
- 원자식, 논리 연산자, 정량자가 다음 규칙에 따라 결합되어 표현되는 식
  1. 모든 원자가 WFF이다
  2. F가 WFF이면, (F)와 ㄱF(NOT F)도 WFF이다
  3. F와 G가 WFF면 F^G(F AND G)와 FVG(F OR G)도 WFF이다
  4. F가 WFF이고 x가 자유 변수이면 (∀x)(F)와 (∃x)(F)도 WFF이다
  5. 1~4의 규칙만을 반복 적용해서 만들어진 식은 WFF이다
 
